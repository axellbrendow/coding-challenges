"""
A good way to get started with a question like this is to make a couple of examples.

First I tried to understand how powers of 10 are generated, but this didn't seem to help.

1
10 = 1 + 9, 2 + 8, 3 + 7, 4 + 6, 5 + 5
100 = 1 + 99, 2 + 98, 3 + 97, 4 + 96
1000
10000

Then I listed all the powers of the digits:

9² = 81
8² = 64
7² = 49
6² = 36
5² = 25
4² = 16
3² = 9
2² = 4
1² = 1

Then I tried to run the algorithm with 3 examples:

n = 1

n = 2
2² = 4 (cycle)
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4 (cycle)

n = 19
9² + 1² = 82
2² + 8² = 68
8² + 6² = 100
0² + 0² + 1² = 1

If you get the highest numbers with increasing number of digits (9, 99, 999, 9999, 99999)
you'll notice that after 3 digits, the numbers always lose one digit after passing through
the process, this indicates that the possibilities are not infinite, the numbers will always
be between 1 and 999 so, eventually, you'll end up in a cycle.

n = 9
9² = 81
1² + 8² = 65
5² + 6² = 61
1² + 6² = 37 (cycle)
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37 (cycle)

n = 99
9² + 9² = 162
2² + 6² + 1² = 41
1² + 4² = 17
7² + 1² = 50
0² + 5² = 25
5² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 999
9² + 9² + 9² = 243
3² + 4² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 9999
9² + 9² + 9² + 9² = 324
4² + 2² + 3² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 99999
9² + 9² + 9² + 9² + 9² = 405
5² + 0² + 4² = 41
1² + 4² = 17
7² + 1² = 50
0² + 5² = 25
5² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 999999
9² + 9² + 9² + 9² + 9² + 9² = 486
6² + 8² + 4² = 116
6² + 1² + 1² = 38
8² + 3² = 73
3² + 7² = 58 (cycle)
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58 (cycle)

n = 9999999
9² + 9² + 9² + 9² + 9² + 9² + 9² = 567
7² + 6² + 5² = 110
0² + 1² + 1² = 2
2² = 4 (cycle)
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4 (cycle)

n = 99999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 648
8² + 4² + 6² = 116
6² + 1² + 1² = 38
8² + 3² = 73
3² + 7² = 58 (cycle)
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58 (cycle)

n = 999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 729
9² + 2² + 7² = 134
4² + 3² + 1² = 26
6² + 2² = 40
0² + 4² = 16 (cycle)
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16 (cycle)

n = 9999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 810
0² + 1² + 8² = 65
5² + 6² = 61
1² + 6² = 37 (cycle)
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37 (cycle)

n = 99999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 891
1² + 9² + 8² = 146
6² + 4² + 1² = 53
3² + 5² = 34
4² + 3² = 25
5² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 999999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 972
2² + 7² + 9² = 134
4² + 3² + 1² = 26
6² + 2² = 40
0² + 4² = 16 (cycle)
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16 (cycle)

n = 9999999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 1053
3² + 5² + 0² + 1² = 35
5² + 3² = 34
4² + 3² = 25
5² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

n = 99999999999999
9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² + 9² = 1134
4² + 3² + 1² + 1² = 27
7² + 2² = 53
3² + 5² = 34
4² + 3² = 25
5² + 2² = 29
9² + 2² = 85
5² + 8² = 89 (cycle)
9² + 8² = 145
5² + 4² + 1² = 42
2² + 4² = 20
0² + 2² = 4
4² = 16
6² + 1² = 37
7² + 3² = 58
8² + 5² = 89 (cycle)

This question can be solved in O(1) space by applying the fast and slow pointer strategy:

slow, fast = n, n
slow = isHappy(slow)
fast = isHappy(fast)
fast = isHappy(fast)
"""


def isHappy(n: int) -> bool:
    numbers = {n}
    while n != 1:
        new_n = 0
        while n != 0:
            new_n += (n % 10) * (n % 10)
            n = n // 10
        n = new_n
        if n in numbers:
            return False
        numbers.add(n)
    return True


assert isHappy(1) == True
assert isHappy(2) == False
assert isHappy(19) == True
assert isHappy(999999) == False
assert isHappy(9999999) == False
assert isHappy(99999999) == False
assert isHappy(999999999) == False
assert isHappy(9999999999) == False
assert isHappy(99999999999) == False
assert isHappy(999999999999) == False
assert isHappy(9999999999999) == False
assert isHappy(99999999999999) == False
